#include "PP6Day3Menu.hpp"

 

// Standard Library

#include <iostream>

 

// This Project

 #include "PP6FourVector.hpp"

 #include "PP6Math.hpp"

 #include "PP6Day3MuonAnalysis.hpp"

 

FourVector* userCreateFourVector() 

{

  double it, ix, iy, iz;

 

  std::cout << "Enter the t-component: ";

  it = Input();

  std::cout << "Enter the x-component: ";

  ix = Input();

  std::cout << "Enter the y-component: ";

  iy = Input();

  std::cout << "Enter the z-component: ";

  iz = Input();

  

  return createFourVector(it, ix, iy, iz);

}

 

 

void pp6day3_menu() {

  FourVector *iV, *iU;

  double ivelocity(0.0);

   

  double res(0); 

  char menu3;

 

  while (true)

    {

 

      std::cout << "PP6Calculator - Day 3 Menu" << std::endl;

      std::cout << "==========================" << std::endl;

      std::cout << "Enter the operation you would like to perform:" << std::endl;

      std::cout << "1)  Create a FourVector and calculate its interval" << std::endl;

      std::cout << "2)  Create and Boost a FourVector" << std::endl;

      std::cout << "3)  Add two FourVectors" << std::endl;

      std::cout << "4)  Analyse input files for muon pairs (Day 3 version)" 

		<< std::endl;

      std::cout << "q)  Quit" << std::endl;

      std::cout << ">> ";

     

      std::cin >> menu3;

       

      if(!std::cin)

	{

	  std::cerr << "[error] Error in input" << std::endl;

	  std::cin.clear();

	  std::cin.ignore(std::numeric_limits<std::streamsize>::max(), '\n');

	  continue;

	}

 

      if (menu3 == 'q')

	{

	  break;

	}

      else if (menu3 == '1')

	{

	  // Read in the four vector

	  iV = userCreateFourVector();

	  std::cout << "[result]: interval = " << iV->interval() << std::endl;

	  destroyFourVector(iV);    

	}

      else if (menu3 == '2')

	{

	  iV = userCreateFourVector();

 

	  std::cout << "Enter the boost speed along z: ";

	  ivelocity = Input();

 

	  res = iV->boost_z(ivelocity);

	  if (!res) 

	    {

	      std::cout << "[result] v = " << iV->asString() << std::endl;

	      destroyFourVector(iV);

	    }

	}

      else if (menu3 == '3')

	{

	  std::cout << "Details for 1st FourVector:" << std::endl;

	  iV = userCreateFourVector();

	  std::cout << "Details for 2nd FourVector:" << std::endl;

	  iU = userCreateFourVector();

	  FourVector sum = (*iV) + (*iU);

	  std::cout << "[result] v = " << sum << std::endl;

	  destroyFourVector(iV);

	  destroyFourVector(iU);

	}

      else if (menu3 == '4')

	{

	  res = pp6day3_muonanalysis();

	}

      else

	{

	  std::cerr << "[error] Operation '" << menu3 << "' not recognised."

		    << std::endl;

	  continue;

	}

 

      if (res)

	{

	  std::cerr << "[error] Operation '" << menu3 

		    << "' returned a non-zero code '" << res

		    << "'. Please check parameters."

		    << std::endl;

	  res = 0;

	  destroyFourVector(iV);

	  destroyFourVector(iU);

	  continue;

	}

    }

}
